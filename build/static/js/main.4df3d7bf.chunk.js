(this.webpackJsonpiiif_ransom_notes=this.webpackJsonpiiif_ransom_notes||[]).push([[0],{36:function(e){e.exports=JSON.parse('{"title":"Primary Source Ransom Note Generator","language-select":"Select a language","demands-input":"Enter your demands...","refresh":"Refresh","remove":"Remove","info":"See more information","matched-manifests":"Matched manifests"}')},37:function(e){e.exports=JSON.parse('{"title":"AR: Primary Source Ransom Note Generator","language-select":"AR: Select a language","demands-input":"AR: Enter your demands...","refresh":"AR: Refresh","remove":"AR: Remove","info":"AR: See more information","matched-manifests":"AR: Matched manifests"}')},42:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(32),s=a.n(r),i=(a(42),a(2)),o=a(69),l={ar:["https://www.agda.ae/en/catalogue/tna/fo/371/168903/iiif/manifest","https://www.agda.ae/en/catalogue/tna/fo/93/137/iiif/manifest"],en:["https://www.agda.ae/en/catalogue/tna/fo/371/109817/iiif/manifest","https://www.agda.ae/en/catalogue/tna/fo/371/168903/iiif/manifest","https://www.agda.ae/en/catalogue/tna/fo/93/137/iiif/manifest","https://www.agda.ae/en/catalogue/tna/fo/464/57/iiif/manifest"]},u=a(4),d=a(18),f=a(7),j=a(5),m=a.n(j),b=a(8),h=a.n(b),g=a(17),O=a(9),p=a(0),v=function(e){var t=e.imageMetadata,a=e.ransomWord,c=e.keyName,r=e.language,s=e.wordIndex,l=Object(n.useState)(""),u=Object(i.a)(l,2),d=u[0],f=u[1],j=Object(o.a)().i18n;Object(n.useEffect)((function(){f(t[Math.floor(Math.random()*t.length)]),j.changeLanguage(r)}),[j,t,r]);return Object(p.jsxs)("div",{className:"".concat(c),children:[Object(p.jsx)("img",{src:"".concat(d.imageURL),alt:"OCR of ".concat(a),name:"".concat(s,"_").concat(a,"---").concat(d.manifestId,"---").concat(d.label)}),t.length>1?Object(p.jsx)("div",{onClick:function(){f(t[Math.floor(Math.random()*t.length)])},className:"refresh",children:Object(p.jsx)(g.a,{})}):Object(p.jsxs)("div",{className:"refresh",children:['This is the only image found for "',a,'"']})]})},x=function(e){var t=e.letterToSearch,a=e.manifestData,c=e.language,r=e.wordIndex,s=Object(n.useState)(),o=Object(i.a)(s,2),l=o[0],u=o[1],d=Object(n.useState)(!1),j=Object(i.a)(d,2),b=j[0],g=j[1];return Object(n.useEffect)((function(){var e=a.length,n=[];a.forEach((function(a){var c=function(){var e=Object(f.a)(m.a.mark((function e(t,c){var r,s,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(t,"?q=").concat(c));case 2:r=e.sent,s=r.data,(i=s.resources).length>0&&(o=i.map((function(e){var t=e.on.split("#")[0],n=e.on.split("=")[1].split(",").map((function(e){return parseInt(e)+10})).join(","),c=a.canvases.filter((function(e){return e["@id"]===t}))[0].images[0].resource["@id"];return{imageURL:c=c.replace("full",n),label:a.label,manifestId:a.manifestId}})),n=[].concat(Object(O.a)(n),Object(O.a)(o)),u(n));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();c(a.searchURL,t),0===(e-=1)&&g(!0)}))}),[t,a]),b?Object(p.jsx)("div",{children:void 0!==l?Object(p.jsx)(v,{imageMetadata:l,ransomWord:t,language:c,keyName:"letter",wordIndex:r}):Object(p.jsx)("div",{children:t})}):null},w=function(e){var t=e.wordToSearch,a=e.manifestData,c=e.language,r=e.wordIndex,s=Object(n.useState)(),o=Object(i.a)(s,2),l=o[0],u=o[1],d=Object(n.useState)(!1),j=Object(i.a)(d,2),b=j[0],g=j[1];return Object(n.useEffect)((function(){var e=a.length,n=[];a.forEach((function(a){var c=function(){var e=Object(f.a)(m.a.mark((function e(t,c){var r,s,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(t,"?q=").concat(c));case 2:r=e.sent,s=r.data,(i=s.resources).length>0&&(o=i.map((function(e){var t=e.on.split("#")[0],n=e.on.split("=")[1],c=a.canvases.filter((function(e){return e["@id"]===t}))[0].images[0].resource["@id"];return{imageURL:c=c.replace("full",n),label:a.label,manifestId:a.manifestId}})),n=[].concat(Object(O.a)(n),Object(O.a)(o)),u(n));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();c(a.searchURL,t),0===(e-=1)&&g(!0)}))}),[t]),b?Object(p.jsx)(p.Fragment,{children:void 0!==l?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(v,{imageMetadata:l,ransomWord:t,keyName:"word",language:c,wordIndex:r})}):Object(p.jsx)("div",{className:"ransom-letters",children:t.split("").map((function(e,t){return Object(p.jsx)(x,{letterToSearch:e,manifestData:a,language:c,wordIndex:r},t)}))})}):null},S=function(e){var t=e.matchedManifests,a=Object.values(t);return Object(p.jsx)("div",{children:a.map((function(e,t){return Object(p.jsx)("div",{children:Object(p.jsxs)("p",{children:[e.ransomWord,": ",Object(p.jsx)("a",{href:"".concat(e.manifestId),children:e.label})]})},t)}))})},N=function(e){var t=e.language,a=Object(o.a)(),c=a.t,r=a.i18n,s=Object(n.useState)([]),j=Object(i.a)(s,2),b=j[0],O=j[1],v=Object(n.useState)(null),x=Object(i.a)(v,2),N=x[0],R=x[1],y=Object(n.useState)(""),I=Object(i.a)(y,2),k=I[0],E=I[1],M=Object(n.useState)([]),L=Object(i.a)(M,2),_=L[0],A=L[1],U=Object(n.useState)(),C=Object(i.a)(U,2),T=C[0],W=C[1];Object(n.useEffect)((function(){O(l["".concat(t)]),r.changeLanguage(t)}),[t,r]),Object(n.useEffect)((function(){var e=[];b.forEach((function(t){var a=function(){var a=Object(f.a)(m.a.mark((function a(){var n,c,r,s;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.get(t);case 2:n=a.sent,c=n.data,(r=c.service.filter((function(e){return"http://iiif.io/api/search/1/context.json"===e["@context"]}))).length>0&&(s={label:c.label["@value"],manifestId:c["@id"],canvases:c.sequences[0].canvases,searchURL:r[0]["@id"]},e.push(s));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();a()})),R(e)}),[b]);var D=function(e){var t=e.target.id.split("_")[1],a=e.target.id.split("_")[0],n=_.filter((function(e){return e!==t}));A(n),E(n.join(" "));var c=Object(d.a)({},T);c[e.target.id]?delete c[e.target.id]:t.split("").map((function(e){return"".concat(a,"_").concat(e)})).forEach((function(e){return delete c[e]}));W(c)},J=function(e){var t=e.target.name.split("---")[0],a={ransomWord:e.target.name.split("---")[0].split("_")[1],manifestId:e.target.name.split("---")[1],label:e.target.name.split("---")[2]},n=Object(d.a)(Object(d.a)({},T),{},Object(u.a)({},t,a));W(n)};return N?Object(p.jsxs)("div",{className:"prsng-body",children:[Object(p.jsx)("div",{className:"demand",children:Object(p.jsx)("form",{children:Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:"input",placeholder:c("demands-input"),value:k,onChange:function(e){var t=e.target.value,a=t.split(" ").filter((function(e){return""!==e}));E(t)," "===t[t.length-1]&&A(a)}})})})}),Object(p.jsxs)("div",{className:"ransom-output",children:[Object(p.jsx)("div",{className:"ransom-words",children:_.map((function(e,a){return Object(p.jsxs)("div",{className:"ransom-word",onLoad:J,children:[Object(p.jsx)("div",{id:"".concat(a,"_").concat(e),onClick:D,className:"remove",children:Object(p.jsx)(g.b,{})}),Object(p.jsx)(w,{wordToSearch:e,manifestData:N,language:t,wordIndex:a})]},a)}))}),Object(p.jsxs)("div",{className:"manifest-panel",children:[Object(p.jsx)("h4",{children:c("matched-manifests")}),void 0!==T&&Object(p.jsx)(S,{matchedManifests:T})]})]})]}):null};var R=function(){var e=Object(n.useState)("en"),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(o.a)(),s=r.t,u=r.i18n,d=Object.keys(l);return Object(p.jsxs)("div",{className:"app-body",children:[Object(p.jsxs)("div",{className:"prsng-body",children:[Object(p.jsx)("h1",{children:s("title")}),Object(p.jsxs)("div",{className:"language-select",children:[Object(p.jsx)("h3",{children:s("language-select")}),Object(p.jsx)("select",{onChange:function(e){c(e.target.value),u.changeLanguage(e.target.value)},value:a,className:"language-option",children:d.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}))})]})]}),Object(p.jsx)(N,{language:a})]})},y=a(21),I=a(11),k={en:{translation:a(36)},ar:{translation:a(37)}};y.a.use(I.e).init({resources:k,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});y.a;s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(R,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.4df3d7bf.chunk.js.map